document.addEventListener('DOMContentLoaded',()=>{console.log('üöÄ Portfolio JavaScript initialis√©');const mobileMenuToggle=document.querySelector('.mobile-menu-toggle');const navMenu=document.querySelector('.nav-menu');if(mobileMenuToggle&&navMenu){console.log('üì± Menu mobile initialis√©');mobileMenuToggle.addEventListener('click',()=>{const isOpen=navMenu.classList.contains('active');if(isOpen){closeMobileMenu();}else{openMobileMenu();}});const navLinks=navMenu.querySelectorAll('a');navLinks.forEach(link=>{link.addEventListener('click',()=>{closeMobileMenu();});});document.addEventListener('keydown',(e)=>{if(e.key==='Escape'&&navMenu.classList.contains('active')){closeMobileMenu();}});document.addEventListener('click',(e)=>{if(navMenu.classList.contains('active')&&!navMenu.contains(e.target)&&!mobileMenuToggle.contains(e.target)){closeMobileMenu();}});function openMobileMenu(){navMenu.classList.add('active');mobileMenuToggle.classList.add('active');mobileMenuToggle.setAttribute('aria-expanded','true');mobileMenuToggle.setAttribute('aria-label','Fermer le menu de navigation');document.body.style.overflow='hidden';console.log('üì± Menu mobile ouvert');}function closeMobileMenu(){navMenu.classList.remove('active');mobileMenuToggle.classList.remove('active');mobileMenuToggle.setAttribute('aria-expanded','false');mobileMenuToggle.setAttribute('aria-label','Ouvrir le menu de navigation');document.body.style.overflow='';console.log('üì± Menu mobile ferm√©');}}const navLinks=document.querySelectorAll('nav a');const sections=document.querySelectorAll('section');function navigateToSection(sectionId){try{sections.forEach(section=>{section.classList.remove('active');});const targetSection=document.querySelector(sectionId);if(targetSection){targetSection.classList.add('active');console.log(`üìç Navigation vers: ${sectionId}`);}else{console.warn(`‚ö†Ô∏è Section non trouv√©e: ${sectionId}`);const homeSection=document.querySelector('#accueil');if(homeSection)homeSection.classList.add('active');}navLinks.forEach(link=>{link.classList.remove('active');if(link.getAttribute('href')===sectionId){link.classList.add('active');}});}catch(error){console.error('‚ùå Erreur lors de la navigation:',error);}}if(sections.length>0){navLinks.forEach(link=>{link.addEventListener('click',(e)=>{e.preventDefault();const sectionId=link.getAttribute('href');navigateToSection(sectionId);history.pushState(null,'',sectionId);});});window.addEventListener('popstate',()=>{const sectionId=window.location.hash||'#accueil';navigateToSection(sectionId);});const initialSection=window.location.hash||'#accueil';navigateToSection(initialSection);}const contactForm=document.getElementById('contact-form');if(contactForm){contactForm.addEventListener('submit',(e)=>{e.preventDefault();try{console.log('üìß Formulaire soumis');alert('Merci pour votre message!Je vous recontacterai bient√¥t.');contactForm.reset();}catch(error){console.error('‚ùå Erreur lors de l\'envoi du formulaire:',error);alert('Erreur lors de l\'envoi. Veuillez r√©essayer ou me contacter directement.');}});}const projectCards=document.querySelectorAll('.project-card');projectCards.forEach(card=>{card.addEventListener('click',(e)=>{navigateToProject(card);});card.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();navigateToProject(card);}});});function navigateToProject(card){try{const projectId=card.getAttribute('data-project');if(projectId){console.log(`üéØ Redirection vers le projet: ${projectId}`);window.location.href=`projects/${projectId}.html`;}else{console.warn('‚ö†Ô∏è ID de projet manquant');}}catch(error){console.error('‚ùå Erreur lors de la navigation vers le projet:',error);}}console.log('üñºÔ∏è Initialisation de la galerie d\'images...');const featuredImage=document.getElementById('featured-image');const thumbnails=document.querySelectorAll('.thumbnail');console.log(`√âl√©ments trouv√©s: featuredImage=${!!featuredImage},thumbnails=${thumbnails.length}`);if(featuredImage&&thumbnails.length>0){console.log('‚úÖ Galerie d\'images activ√©e');let currentIndex=0;let intervalId=null;let isPaused=false;const SLIDESHOW_INTERVAL=3000;function changeImage(index){try{if(index<0||index>=thumbnails.length){console.warn(`‚ö†Ô∏è Index d'image invalide: ${index}`);return;}const newImageSrc=thumbnails[index].src;console.log(`üîÑ Changement d'image vers index ${index}: ${newImageSrc}`);const tempImg=new Image();tempImg.onload=()=>{featuredImage.src=newImageSrc;updateThumbnailsState(index);currentIndex=index;};tempImg.onerror=()=>{console.error(`‚ùå Erreur de chargement de l'image: ${newImageSrc}`);};tempImg.src=newImageSrc;}catch(error){console.error('‚ùå Erreur lors du changement d\'image:',error);}}function updateThumbnailsState(activeIndex){thumbnails.forEach((thumb,i)=>{if(i===activeIndex){thumb.classList.add('active');}else{thumb.classList.remove('active');}});}function startSlideshow(){if(intervalId)clearInterval(intervalId);intervalId=setInterval(()=>{if(!isPaused&&thumbnails.length>1){let nextIndex=(currentIndex+1)% thumbnails.length;changeImage(nextIndex);}},SLIDESHOW_INTERVAL);console.log('‚ñ∂Ô∏è Diaporama automatique d√©marr√©');}function stopSlideshow(){if(intervalId){clearInterval(intervalId);intervalId=null;console.log('‚è∏Ô∏è Diaporama automatique arr√™t√©');}}try{changeImage(0);startSlideshow();}catch(error){console.error('‚ùå Erreur lors de l\'initialisation de la galerie:',error);}thumbnails.forEach((thumbnail,index)=>{thumbnail.addEventListener('click',()=>{console.log(`üëÜ Clic sur thumbnail ${index}`);changeImage(index);startSlideshow();});});const container=document.querySelector('.main-image-container');if(container){console.log('üîç Effet de zoom activ√©');container.addEventListener('mousemove',(e)=>{try{const rect=container.getBoundingClientRect();const x=((e.clientX-rect.left)/rect.width)*100;const y=((e.clientY-rect.top)/rect.height)*100;featuredImage.style.setProperty('--x',`${x}%`);featuredImage.style.setProperty('--y',`${y}%`);isPaused=true;}catch(error){console.error('‚ùå Erreur lors du zoom:',error);}});container.addEventListener('mouseleave',()=>{try{featuredImage.style.setProperty('--x','50%');featuredImage.style.setProperty('--y','50%');isPaused=false;console.log('üîç Zoom reset,diaporama repris');}catch(error){console.error('‚ùå Erreur lors du reset du zoom:',error);}});}window.addEventListener('beforeunload',()=>{stopSlideshow();});}else{console.log('‚ÑπÔ∏è Galerie d\'images non disponible sur cette page');}function initLazyLoading(){console.log('üöÄ Initialisation du lazy loading...');if(!('IntersectionObserver' in window)){console.warn('‚ö†Ô∏è Intersection Observer non support√©,chargement imm√©diat des images');document.querySelectorAll('img[data-src]').forEach(loadImage);return;}const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;loadImage(img);observer.unobserve(img);}});},{rootMargin: '100px 0px',threshold: 0.01});const lazyImages=document.querySelectorAll('img[data-src]');lazyImages.forEach(img=>{img.classList.add('lazy-image');imageObserver.observe(img);});console.log(`üì∏ ${lazyImages.length}images configur√©es pour le lazy loading`);}function loadImage(img){const src=img.getAttribute('data-src');if(!src)return;console.log(`üì• Chargement lazy de l'image: ${src}`);img.classList.add('lazy-loading');const imageLoader=new Image();imageLoader.onload=()=>{img.src=src;img.classList.remove('lazy-loading');img.classList.add('loaded');img.removeAttribute('data-src');console.log(`‚úÖ Image charg√©e avec succ√®s: ${src}`);};imageLoader.onerror=()=>{console.error(`‚ùå Erreur de chargement de l'image: ${src}`);img.classList.remove('lazy-loading');img.classList.add('error');img.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vbiBkaXNwb25pYmxlPC90ZXh0Pjwvc3ZnPg==';};imageLoader.src=src;}initLazyLoading();console.log('‚úÖ Initialisation du portfolio termin√©e');});